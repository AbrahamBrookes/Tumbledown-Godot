[gd_scene load_steps=74 format=3 uid="uid://u65ut6h3i0ms"]

[ext_resource type="Script" uid="uid://bdfxwv0wcdtyk" path="res://Scripts/PlayerCharacter/DeterministicPlayerCharacter.gd" id="1_p3iwg"]
[ext_resource type="PackedScene" uid="uid://bquuovixubyt4" path="res://Scripts/Health/PlayerHealth.tscn" id="2_jb5ed"]
[ext_resource type="PackedScene" uid="uid://s2b7mbfga4og" path="res://Components/Interactable/Interactor.tscn" id="2_ottvh"]
[ext_resource type="PackedScene" uid="uid://c2f6gkn1nj3vd" path="res://Art/Player/Character/import/kora_toon_exporting_to_godot.glb" id="2_oyuwf"]
[ext_resource type="Texture2D" uid="uid://cke5o305l38eh" path="res://Art/Player/Character/kora_toon_dif.png" id="3_jb5ed"]
[ext_resource type="Script" uid="uid://b8tm2dsp5o0p4" path="res://Scripts/StateMachine/StateMachine.gd" id="3_n6sth"]
[ext_resource type="Script" uid="uid://bm7xyyr5k284s" path="res://Scripts/PlayerCharacter/States/Slash.gd" id="5_ph5ji"]
[ext_resource type="Script" uid="uid://cg7tsdk2ofmni" path="res://Scripts/PlayerCharacter/States/Locomote.gd" id="6_et2ma"]
[ext_resource type="Script" uid="uid://r14b1w2ap2jr" path="res://Scripts/PlayerCharacter/States/LeaningCrate.gd" id="7_otshi"]
[ext_resource type="Script" uid="uid://cso4uel115xs0" path="res://Scripts/PlayerCharacter/States/PushingCrate.gd" id="8_hyvrb"]
[ext_resource type="Script" uid="uid://dy3ag1l4iwq0g" path="res://Scripts/PlayerCharacter/States/Crouching.gd" id="9_unn3g"]
[ext_resource type="Script" uid="uid://bcle844nc463r" path="res://Scripts/PlayerCharacter/States/Crawling.gd" id="10_5rovj"]
[ext_resource type="Script" uid="uid://3w1wbhoushls" path="res://Scripts/PlayerCharacter/States/Jumping.gd" id="11_jxu01"]
[ext_resource type="PackedScene" uid="uid://bflp5jntvmqk8" path="res://UI/MainMenu/MainMenu.tscn" id="12_haj5d"]
[ext_resource type="Script" uid="uid://oj6wnredkch1" path="res://Scripts/PlayerCharacter/States/OpenChest.gd" id="12_io75w"]
[ext_resource type="Script" uid="uid://biasrj2wyiwxp" path="res://Scripts/PlayerCharacter/States/DisplayLoot.gd" id="13_ottvh"]
[ext_resource type="PackedScene" uid="uid://dtyr0l5158u1f" path="res://UI/Dialogue/Dialogue.tscn" id="13_ucqvn"]
[ext_resource type="Script" uid="uid://dnq0hd0dpa8dx" path="res://Scripts/Inventory/PlayerInventory.gd" id="14_kejb0"]
[ext_resource type="Script" uid="uid://b4iilueaajuii" path="res://Scripts/Inventory/KoyinPouch.gd" id="15_m3vir"]
[ext_resource type="Texture2D" uid="uid://crx8mgygeubnk" path="res://Gameplay/Koyins/icon.png" id="16_nvibq"]
[ext_resource type="FontFile" uid="uid://dhos0jfecis2a" path="res://Fonts/MPLUSRounded1c-Bold.ttf" id="17_gsa12"]
[ext_resource type="Texture2D" uid="uid://svdfeftb3nag" path="res://Scripts/Health/heart-full.png" id="18_gsa12"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_61hpo"]
albedo_texture = ExtResource("3_jb5ed")

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_alo0e"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_l81yh"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_isjgl"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oyue0"]
animation = &"fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_svilr"]
animation = &"run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ool8q"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6f5kc"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uipqp"]
animation = &"fall"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_1pc02"]
blend_point_0/node = SubResource("AnimationNodeAnimation_l81yh")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_isjgl")
blend_point_1/pos = Vector2(0, 1)
blend_point_2/node = SubResource("AnimationNodeAnimation_oyue0")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_svilr")
blend_point_3/pos = Vector2(1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_ool8q")
blend_point_4/pos = Vector2(0.3, 0)
blend_point_5/node = SubResource("AnimationNodeAnimation_6f5kc")
blend_point_5/pos = Vector2(1, 1)
blend_point_6/node = SubResource("AnimationNodeAnimation_uipqp")
blend_point_6/pos = Vector2(1, -1)
min_space = Vector2(0, -1)
sync = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jb5ed"]
animation = &"display_loot"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nqrec"]
animation = &"carrying_object"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4hbm8"]
animation = &"leaning_pushable"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_duqcs"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4oav6"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_biff6"]
animation = &"run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_srys3"]
blend_point_0/node = SubResource("AnimationNodeAnimation_duqcs")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_4oav6")
blend_point_1/pos = 0.3
blend_point_2/node = SubResource("AnimationNodeAnimation_biff6")
blend_point_2/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_61hpo"]
animation = &"open_chest"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g4gtf"]
animation = &"pushing_pushable"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sma0w"]
resource_local_to_scene = true
animation = &"slash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tvpiq"]
animation = &"crawl_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yxknk"]
animation = &"crawl"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_ebfcu"]
blend_point_0/node = SubResource("AnimationNodeAnimation_tvpiq")
blend_point_0/pos = 0.1
blend_point_1/node = SubResource("AnimationNodeAnimation_yxknk")
blend_point_1/pos = 0.5

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qhlp2"]
animation = &"crouch"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wbke6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eh4ht"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2l6ic"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k38qc"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_831vp"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_epm4v"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3diy6"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uup32"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nw37k"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e511p"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sl7d2"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nedae"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x44cg"]
xfade_time = 0.05

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tusl0"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_no18i"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gy7fs"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_io75w"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ottvh"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xa3l1"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_61bxm"]
allow_transition_to_self = true
states/BlendSpace2D/node = SubResource("AnimationNodeBlendSpace2D_1pc02")
states/BlendSpace2D/position = Vector2(267, 195)
states/DisplayLoot/node = SubResource("AnimationNodeAnimation_jb5ed")
states/DisplayLoot/position = Vector2(910, 200)
states/Jumping/node = SubResource("AnimationNodeAnimation_nqrec")
states/Jumping/position = Vector2(492, 178)
states/LeaningCrate/node = SubResource("AnimationNodeAnimation_4hbm8")
states/LeaningCrate/position = Vector2(656, -70)
states/Locomote/node = SubResource("AnimationNodeBlendSpace1D_srys3")
states/Locomote/position = Vector2(400, 100)
states/OpenChest/node = SubResource("AnimationNodeAnimation_61hpo")
states/OpenChest/position = Vector2(777, 200)
states/PushingCrate/node = SubResource("AnimationNodeAnimation_g4gtf")
states/PushingCrate/position = Vector2(672, 39)
states/Slash/node = SubResource("AnimationNodeAnimation_sma0w")
states/Slash/position = Vector2(233, -32)
states/crawling/node = SubResource("AnimationNodeBlendSpace1D_ebfcu")
states/crawling/position = Vector2(347, -174)
states/crouch/node = SubResource("AnimationNodeAnimation_qhlp2")
states/crouch/position = Vector2(406, -70)
transitions = ["Locomote", "End", SubResource("AnimationNodeStateMachineTransition_wbke6"), "Slash", "Locomote", SubResource("AnimationNodeStateMachineTransition_eh4ht"), "Locomote", "Slash", SubResource("AnimationNodeStateMachineTransition_2l6ic"), "Locomote", "LeaningCrate", SubResource("AnimationNodeStateMachineTransition_k38qc"), "LeaningCrate", "PushingCrate", SubResource("AnimationNodeStateMachineTransition_831vp"), "PushingCrate", "LeaningCrate", SubResource("AnimationNodeStateMachineTransition_epm4v"), "PushingCrate", "Locomote", SubResource("AnimationNodeStateMachineTransition_3diy6"), "LeaningCrate", "Locomote", SubResource("AnimationNodeStateMachineTransition_uup32"), "Locomote", "crouch", SubResource("AnimationNodeStateMachineTransition_nw37k"), "crouch", "Locomote", SubResource("AnimationNodeStateMachineTransition_e511p"), "crouch", "crawling", SubResource("AnimationNodeStateMachineTransition_sl7d2"), "crawling", "crouch", SubResource("AnimationNodeStateMachineTransition_nedae"), "Locomote", "Jumping", SubResource("AnimationNodeStateMachineTransition_x44cg"), "Jumping", "Locomote", SubResource("AnimationNodeStateMachineTransition_tusl0"), "Start", "BlendSpace2D", SubResource("AnimationNodeStateMachineTransition_no18i"), "Start", "Locomote", SubResource("AnimationNodeStateMachineTransition_gy7fs"), "Locomote", "OpenChest", SubResource("AnimationNodeStateMachineTransition_io75w"), "OpenChest", "DisplayLoot", SubResource("AnimationNodeStateMachineTransition_ottvh"), "DisplayLoot", "Locomote", SubResource("AnimationNodeStateMachineTransition_xa3l1")]
graph_offset = Vector2(70, -22)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_v7krk"]
graph_offset = Vector2(-192, 33)
nodes/output/position = Vector2(220, 100)
nodes/AnimSpeed/node = SubResource("AnimationNodeTimeScale_alo0e")
nodes/AnimSpeed/position = Vector2(60, 100)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_61bxm")
nodes/StateMachine/position = Vector2(-200, 100)
node_connections = [&"output", 0, &"AnimSpeed", &"AnimSpeed", 0, &"StateMachine"]

[sub_resource type="BoxShape3D" id="BoxShape3D_bwvvd"]
size = Vector3(1, 0.469729, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_tjr6x"]
size = Vector3(0.9, 0.9, 0.9)

[sub_resource type="BoxMesh" id="BoxMesh_lt837"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_30vrr"]
radius = 0.236864
height = 1.10199

[sub_resource type="Shader" id="Shader_17fcu"]
code = "shader_type canvas_item;
render_mode unshaded;

uniform float focus_y : hint_range(0.0, 1.0) = 0.55;
uniform float focus_band : hint_range(0.0, 0.5) = 0.12;
uniform float feather : hint_range(0.0, 0.5) = 0.18;
uniform float blur_strength : hint_range(0.0, 20.0) = 8.0;

// Vignette controls
uniform float vignette_strength : hint_range(0.0, 1.0) = 0.18;
uniform float vignette_softness : hint_range(0.1, 2.0) = 0.9;

uniform sampler2D SCREEN_TEXTURE : hint_screen_texture, filter_linear_mipmap;

vec3 s(vec2 uv) {
	return texture(SCREEN_TEXTURE, uv).rgb;
}

void fragment() {
	vec2 uv = SCREEN_UV;

	// ---- Tilt-shift (vertical blur only) ----
	float dy = abs(uv.y - focus_y);
	float blur_mask = smoothstep(focus_band, focus_band + feather, dy);

	float px = blur_strength * blur_mask;
	vec2 texel = 1.0 / vec2(textureSize(SCREEN_TEXTURE, 0));
	vec2 off = vec2(0.0, texel.y * px);

	vec3 blur =
		s(uv) * 0.40 +
		(s(uv + off) + s(uv - off)) * 0.25 +
		(s(uv + off * 2.0) + s(uv - off * 2.0)) * 0.05;

	vec3 col = mix(s(uv), blur, blur_mask);

	// ---- Vignette ----
	vec2 centered = uv - vec2(0.5);
	float dist = length(centered) * 1.414; // normalize to corners
	float vig = smoothstep(1.0, vignette_softness, dist);
	col *= mix(1.0, vig, vignette_strength);

	COLOR = vec4(col, 1.0);
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nvibq"]
shader = SubResource("Shader_17fcu")
shader_parameter/focus_y = 0.514000024415
shader_parameter/focus_band = 0.150000007125
shader_parameter/feather = 0.20400000969
shader_parameter/blur_strength = 2.000000095
shader_parameter/vignette_strength = 0.09600000456
shader_parameter/vignette_softness = 0.69400002970512

[node name="PlayerCharacter" type="CharacterBody3D" node_paths=PackedStringArray("mesh", "animTree", "stateMachine", "player_health", "invincible_timer", "inventory", "interactor")]
collision_layer = 4
collision_mask = 7
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
script = ExtResource("1_p3iwg")
mesh = NodePath("SkinnedMesh")
animTree = NodePath("SkinnedMesh/AnimationTree")
stateMachine = NodePath("SkinnedMesh/StateMachine")
move_speed = 6.0
player_health = NodePath("PlayerHealth")
invincible_timer = NodePath("InvincibilityTimer")
inventory = NodePath("PlayerInventory")
interactor = NodePath("Interactor")

[node name="Interactor" parent="." node_paths=PackedStringArray("trigger", "player_character") instance=ExtResource("2_ottvh")]
trigger = NodePath("../SkinnedMesh/InteractableArea3D")
player_character = NodePath("..")

[node name="SkinnedMesh" parent="." instance=ExtResource("2_oyuwf")]
transform = Transform3D(-1, 0, -6.34988e-06, 0, 1, 0, 6.34988e-06, 0, -1, 0, 0, 0)

[node name="rig" parent="SkinnedMesh" index="0"]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0)

[node name="GeneralSkeleton" parent="SkinnedMesh/rig" index="0"]
bones/0/position = Vector3(-0.013743054, 0.24513406, -0.006745033)
bones/0/rotation = Quaternion(0.11180857, -0.011164624, -0.071606934, 0.9910836)
bones/0/scale = Vector3(1.0000004, 1.0000004, 1)
bones/1/rotation = Quaternion(-0.10217844, 0.0037032086, 0.036000133, 0.99410766)
bones/1/scale = Vector3(1, 1.0000001, 0.99999994)
bones/2/rotation = Quaternion(-0.022711392, 0.010782139, 0.0036676193, 0.9996772)
bones/2/scale = Vector3(0.99999994, 0.9999995, 0.9999996)
bones/3/rotation = Quaternion(-0.051753193, 0.026159551, -0.031260327, 0.9978277)
bones/3/scale = Vector3(0.9999998, 1.0000002, 1.0000001)
bones/4/rotation = Quaternion(0.43283927, -0.004098775, 0.036077846, 0.9007396)
bones/4/scale = Vector3(0.99999946, 1.000001, 0.99999976)
bones/5/rotation = Quaternion(-0.06288302, -6.976681e-05, 4.207356e-06, 0.9980209)
bones/5/scale = Vector3(1.0000013, 0.99999785, 1.0000015)
bones/6/rotation = Quaternion(-0.33448648, -0.0053524566, 0.032936838, 0.94180965)
bones/6/scale = Vector3(0.99999887, 1.0000002, 0.99999994)
bones/7/rotation = Quaternion(-0.6157067, 9.835427e-05, 1.953698e-05, 0.78797543)
bones/8/rotation = Quaternion(-0.28943723, 3.0995867e-05, -0.0017906728, 0.9571953)
bones/9/position = Vector3(6.9100795e-15, 0.77800584, 0.46797514)
bones/10/position = Vector3(-0.01374305, 0.24513404, -0.0067450292)
bones/10/rotation = Quaternion(0.020981155, 0.6774544, 0.6254621, -0.38653904)
bones/10/scale = Vector3(1.0000002, 1, 1.0000004)
bones/11/position = Vector3(-0.013743057, 0.24513404, -0.006745007)
bones/11/rotation = Quaternion(0.07325992, 0.6710037, 0.5629346, 0.476961)
bones/11/scale = Vector3(1.0000002, 1, 1.0000005)
bones/12/rotation = Quaternion(0.0029029474, 0.27995867, 0.9598926, 0.014867178)
bones/12/scale = Vector3(1.0061207, 0.98782426, 1.0061699)
bones/13/rotation = Quaternion(-1.3920946e-05, 0.00025128628, 4.665228e-06, 1)
bones/13/scale = Vector3(0.9999997, 1, 1)
bones/14/rotation = Quaternion(0.06706051, 0.9314305, -0.35722142, 0.018249663)
bones/14/scale = Vector3(1.0091797, 0.97338665, 1.0185163)
bones/15/rotation = Quaternion(1.4551915e-07, 0.06446706, 0.017769959, 0.99776167)
bones/16/rotation = Quaternion(0.11777229, 0.45657873, -0.8799577, -0.05779489)
bones/16/scale = Vector3(0.9865063, 1.000162, 1.0144598)
bones/17/rotation = Quaternion(0.0030892547, 0.99999523, -3.8743013e-07, 7.590278e-08)
bones/18/rotation = Quaternion(-0.03386137, -0.26137632, 0.9617774, -0.07429756)
bones/18/scale = Vector3(1.006044, 0.9879747, 1.0060921)
bones/19/rotation = Quaternion(0.00045760442, 0.008265133, 0.0001551318, 0.9999657)
bones/20/rotation = Quaternion(-0.10214196, 0.85260665, -0.5112365, -0.035583485)
bones/20/scale = Vector3(1.0070225, 0.9739983, 1.0199662)
bones/21/rotation = Quaternion(2.387387e-07, -0.06613069, -0.018228643, 0.9976444)
bones/22/rotation = Quaternion(-0.21448234, 0.4636429, -0.85507613, 0.08875521)
bones/22/scale = Vector3(0.9902957, 0.9994859, 1.0110437)
bones/23/rotation = Quaternion(1.9361488e-07, 0.87068087, 0.49184862, -2.5897972e-07)
bones/23/scale = Vector3(0.99999994, 1.0000008, 0.99999976)
bones/24/position = Vector3(0.029313037, 0.49437603, 0.0003766194)
bones/24/rotation = Quaternion(0.55583405, 0.51047385, 0.43087327, -0.494786)
bones/24/scale = Vector3(0.9999998, 1, 1.0000001)
bones/25/rotation = Quaternion(0.43100238, 0.44905832, -0.7575753, 0.19662979)
bones/25/scale = Vector3(1.0046644, 0.9970718, 0.9984157)
bones/26/rotation = Quaternion(0.009495646, 0.033836335, 0.030964226, 0.99890256)
bones/26/scale = Vector3(1, 1.0000002, 1.0000001)
bones/27/rotation = Quaternion(0.23178661, -0.79803824, 0.11523094, 0.5441799)
bones/27/scale = Vector3(0.99400246, 0.9944025, 1.0119839)
bones/28/rotation = Quaternion(0.0070299953, 0.0069547687, 0.0005864501, 0.99995095)
bones/29/rotation = Quaternion(0.0406207, 0.64796543, 0.08141362, 0.756216)
bones/29/scale = Vector3(0.9927801, 1.0026377, 1.0049088)
bones/30/position = Vector3(0.05742801, 0.41611105, -0.0036590546)
bones/30/rotation = Quaternion(0.068385415, 0.71027535, 0.7001732, 0.024290167)
bones/30/scale = Vector3(1.0000001, 0.99999946, 1.0000001)
bones/31/position = Vector3(-0.006901429, 0.49917647, 0.0026186444)
bones/31/rotation = Quaternion(-0.5081052, 0.5952318, 0.5547638, 0.28242776)
bones/31/scale = Vector3(0.99999964, 1.0000001, 1.0000001)
bones/32/rotation = Quaternion(0.6055502, -0.35055512, 0.65403825, 0.2874964)
bones/32/scale = Vector3(1.0062585, 0.9961071, 0.99790597)
bones/33/rotation = Quaternion(-0.052497692, 0.1870659, 0.17118669, 0.965891)
bones/34/rotation = Quaternion(0.2908404, 0.7346114, 0.5031624, 0.35012236)
bones/34/scale = Vector3(0.99852675, 0.9986216, 1.0041518)
bones/35/rotation = Quaternion(0.24818869, -0.24554281, -0.02069041, 0.9368473)
bones/35/scale = Vector3(1, 0.99999994, 0.9999998)
bones/36/rotation = Quaternion(-0.12490573, -0.93294275, -0.17981985, 0.2857994)
bones/36/scale = Vector3(1.0049433, 0.9970708, 0.99860895)
bones/37/position = Vector3(-0.054641448, 0.4309665, 0.0032791793)
bones/37/rotation = Quaternion(0.06838541, 0.7102753, 0.70017314, 0.024290169)
bones/37/scale = Vector3(1.0000001, 0.9999998, 1.0000002)

[node name="kora_uv" parent="SkinnedMesh/rig/GeneralSkeleton" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_61hpo")

[node name="AnimationTree" type="AnimationTree" parent="SkinnedMesh"]
tree_root = SubResource("AnimationNodeBlendTree_v7krk")
anim_player = NodePath("../AnimationPlayer")
parameters/AnimSpeed/scale = 0.0
parameters/StateMachine/BlendSpace2D/blend_position = Vector2(0.190763, 0.257642)
parameters/StateMachine/Locomote/blend_position = 1.05407
parameters/StateMachine/crawling/blend_position = 0.0

[node name="StateMachine" type="Node3D" parent="SkinnedMesh" node_paths=PackedStringArray("animTree")]
transform = Transform3D(-1, 0, 6.28631e-06, 0, 1, 0, -6.28631e-06, 0, -1, 0, 0, 0)
script = ExtResource("3_n6sth")
animTree = NodePath("../AnimationTree")

[node name="Slash" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("5_ph5ji")

[node name="SlashAgainTimer" type="Timer" parent="SkinnedMesh/StateMachine/Slash"]
process_callback = 0
wait_time = 0.125
one_shot = true

[node name="ApplyHurtTimer" type="Timer" parent="SkinnedMesh/StateMachine/Slash"]
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="Area3D" type="Area3D" parent="SkinnedMesh/StateMachine/Slash"]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 0, 0.393901, -0.696701)
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkinnedMesh/StateMachine/Slash/Area3D"]
transform = Transform3D(1.25, 0, 0, 0, 1.25, 0, 0, 0, 1.25, 0, 0, 0)
shape = SubResource("BoxShape3D_bwvvd")

[node name="Locomote" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("6_et2ma")

[node name="LeaningCrate" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("7_otshi")

[node name="destination_check" type="Area3D" parent="SkinnedMesh/StateMachine/LeaningCrate"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
collision_layer = 0
collision_mask = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkinnedMesh/StateMachine/LeaningCrate/destination_check"]
shape = SubResource("BoxShape3D_tjr6x")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SkinnedMesh/StateMachine/LeaningCrate/destination_check"]
visible = false
mesh = SubResource("BoxMesh_lt837")

[node name="PushingCrate" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("8_hyvrb")

[node name="Crouching" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("9_unn3g")

[node name="Crawling" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("10_5rovj")

[node name="Jumping" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("11_jxu01")
jump_power = 12000.0
lateral_damp = 0.5

[node name="Timer" type="Timer" parent="SkinnedMesh/StateMachine/Jumping"]
wait_time = 0.05
one_shot = true

[node name="OpenChest" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("12_io75w")
metadata/_custom_type_script = "uid://oj6wnredkch1"

[node name="DisplayLoot" type="Node3D" parent="SkinnedMesh/StateMachine"]
script = ExtResource("13_ottvh")
metadata/_custom_type_script = "uid://biasrj2wyiwxp"

[node name="InteractableArea3D" type="Area3D" parent="SkinnedMesh"]
transform = Transform3D(-0.70710254, 0, 0.7071115, 0, 1, 0, -0.7071115, 0, -0.70710254, -4.4239678e-06, 0.393901, 0.696701)
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkinnedMesh/InteractableArea3D"]
transform = Transform3D(1.25, 0, 0, 0, 1.25, 0, 0, 0, 1.25, 0, 0, 0)
shape = SubResource("BoxShape3D_bwvvd")

[node name="hurt_capsule" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.566112, 0)
shape = SubResource("CapsuleShape3D_30vrr")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.6022289, 0.79832345, 0, -0.79832345, 0.6022289, -4.76837e-07, 4.6677504, 2.6091404)

[node name="Control" parent="Camera3D" instance=ExtResource("12_haj5d")]
visible = false

[node name="Dialogue" parent="Camera3D" instance=ExtResource("13_ucqvn")]

[node name="GroundCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0429929, 0.00461194)
target_position = Vector3(0, -0.1, 0)

[node name="DirectlyInFrontCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0.44614553, -0.28385466)
target_position = Vector3(0, -0.25, 0)

[node name="PlayerHealth" parent="." node_paths=PackedStringArray("hearts_container") instance=ExtResource("2_jb5ed")]
max_health = 12
current_health = 12
hearts_container = NodePath("../InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer")

[node name="InvincibilityTimer" type="Timer" parent="."]
one_shot = true

[node name="PlayerInventory" type="Node" parent="."]
script = ExtResource("14_kejb0")
metadata/_custom_type_script = "uid://dnq0hd0dpa8dx"

[node name="KoyinPouch" type="Node" parent="." node_paths=PackedStringArray("label")]
script = ExtResource("15_m3vir")
label = NodePath("../InGameUI/Control/KoyinsContainer/HBoxContainer/MarginContainer/KoyinLabel")
metadata/_custom_type_script = "uid://b4iilueaajuii"

[node name="Tiltshift" type="CanvasLayer" parent="."]
layer = 10

[node name="ColorRect" type="ColorRect" parent="Tiltshift"]
material = SubResource("ShaderMaterial_nvibq")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="InGameUI" type="CanvasLayer" parent="."]
layer = 20

[node name="Control" type="Control" parent="InGameUI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="KoyinsContainer" type="MarginContainer" parent="InGameUI/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 6
size_flags_vertical = 6
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="HBoxContainer" type="HBoxContainer" parent="InGameUI/Control/KoyinsContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="TextureRect" type="TextureRect" parent="InGameUI/Control/KoyinsContainer/HBoxContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
texture = ExtResource("16_nvibq")
expand_mode = 4

[node name="MarginContainer" type="MarginContainer" parent="InGameUI/Control/KoyinsContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 4
theme_override_constants/margin_left = 10

[node name="KoyinLabel" type="Label" parent="InGameUI/Control/KoyinsContainer/HBoxContainer/MarginContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("17_gsa12")
theme_override_font_sizes/font_size = 22
text = "0"

[node name="MarginContainer2" type="MarginContainer" parent="InGameUI/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="VBoxContainer" type="VBoxContainer" parent="InGameUI/Control/MarginContainer2"]
layout_mode = 2

[node name="HeartsGridContainer" type="GridContainer" parent="InGameUI/Control/MarginContainer2/VBoxContainer"]
layout_direction = 3
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
columns = 11

[node name="TextureRect12" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect13" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect14" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect15" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect16" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect17" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect18" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect19" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect20" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect21" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect22" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect2" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect3" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect4" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect5" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect6" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect7" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect8" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect9" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect10" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[node name="TextureRect11" type="TextureRect" parent="InGameUI/Control/MarginContainer2/VBoxContainer/HeartsGridContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
texture = ExtResource("18_gsa12")
expand_mode = 4

[connection signal="timeout" from="SkinnedMesh/StateMachine/Slash/SlashAgainTimer" to="SkinnedMesh/StateMachine/Slash" method="finish_slashing"]
[connection signal="timeout" from="SkinnedMesh/StateMachine/Slash/ApplyHurtTimer" to="SkinnedMesh/StateMachine/Slash" method="_on_apply_hurt_timer_timeout"]
[connection signal="body_entered" from="SkinnedMesh/StateMachine/Slash/Area3D" to="SkinnedMesh/StateMachine/Slash" method="_on_hit_capsule_body_entered"]
[connection signal="body_entered" from="SkinnedMesh/StateMachine/Slash/Area3D" to="Camera3D/Dialogue" method="_on_conversation_collider_entered"]
[connection signal="body_exited" from="SkinnedMesh/StateMachine/Slash/Area3D" to="SkinnedMesh/StateMachine/Slash" method="_on_hit_capsule_body_exited"]
[connection signal="body_exited" from="SkinnedMesh/StateMachine/Slash/Area3D" to="Camera3D/Dialogue" method="_on_conversation_collider_exited"]
[connection signal="timeout" from="SkinnedMesh/StateMachine/Jumping/Timer" to="SkinnedMesh/StateMachine/Jumping" method="_on_timer_timeout"]
[connection signal="body_entered" from="SkinnedMesh/InteractableArea3D" to="Interactor" method="_on_trigger_body_entered"]
[connection signal="body_exited" from="SkinnedMesh/InteractableArea3D" to="Interactor" method="_on_trigger_body_exited"]
[connection signal="timeout" from="InvincibilityTimer" to="." method="_on_invincibility_timer_timeout"]

[editable path="SkinnedMesh"]

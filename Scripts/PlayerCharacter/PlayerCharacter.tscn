[gd_scene load_steps=41 format=3 uid="uid://u65ut6h3i0ms"]

[ext_resource type="Script" path="res://Scripts/PlayerCharacter/player_character.gd" id="1_6mn6j"]
[ext_resource type="PackedScene" uid="uid://c2f6gkn1nj3vd" path="res://Art/Player/Character/import/kora_toon_exporting_to_godot.glb" id="2_oyuwf"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/StateMachine.gd" id="3_n6sth"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/EnemyWander.gd" id="4_06l8q"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Slash.gd" id="5_ph5ji"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Locomote.gd" id="6_et2ma"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/LeaningCrate.gd" id="7_otshi"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/PushingCrate.gd" id="8_hyvrb"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Crouching.gd" id="9_unn3g"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Crawling.gd" id="10_5rovj"]
[ext_resource type="PackedScene" uid="uid://bflp5jntvmqk8" path="res://UI/MainMenu/MainMenu.tscn" id="12_haj5d"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_xe66j"]
friction = 500.0

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_alo0e"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_duqcs"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4oav6"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_biff6"]
animation = &"run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_srys3"]
blend_point_0/node = SubResource("AnimationNodeAnimation_duqcs")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_4oav6")
blend_point_1/pos = 0.3
blend_point_2/node = SubResource("AnimationNodeAnimation_biff6")
blend_point_2/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sma0w"]
resource_local_to_scene = true
animation = &"slash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tvpiq"]
animation = &"crawl_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yxknk"]
animation = &"crawl"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_ebfcu"]
blend_point_0/node = SubResource("AnimationNodeAnimation_tvpiq")
blend_point_0/pos = 0.1
blend_point_1/node = SubResource("AnimationNodeAnimation_yxknk")
blend_point_1/pos = 0.5

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qhlp2"]
animation = &"crouch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4hbm8"]
animation = &"leaning_pushable"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g4gtf"]
animation = &"pushing_pushable"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gy7fs"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wbke6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eh4ht"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2l6ic"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k38qc"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_831vp"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_epm4v"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3diy6"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uup32"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nw37k"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e511p"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sl7d2"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nedae"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_61bxm"]
allow_transition_to_self = true
states/Locomote/node = SubResource("AnimationNodeBlendSpace1D_srys3")
states/Locomote/position = Vector2(400, 100)
states/Slash/node = SubResource("AnimationNodeAnimation_sma0w")
states/Slash/position = Vector2(233, -32)
states/crawling/node = SubResource("AnimationNodeBlendSpace1D_ebfcu")
states/crawling/position = Vector2(347, -174)
states/crouch/node = SubResource("AnimationNodeAnimation_qhlp2")
states/crouch/position = Vector2(406, -70)
states/leaning_pushable/node = SubResource("AnimationNodeAnimation_4hbm8")
states/leaning_pushable/position = Vector2(656, -70)
states/pushing_pushable/node = SubResource("AnimationNodeAnimation_g4gtf")
states/pushing_pushable/position = Vector2(672, 39)
transitions = ["Start", "Locomote", SubResource("AnimationNodeStateMachineTransition_gy7fs"), "Locomote", "End", SubResource("AnimationNodeStateMachineTransition_wbke6"), "Slash", "Locomote", SubResource("AnimationNodeStateMachineTransition_eh4ht"), "Locomote", "Slash", SubResource("AnimationNodeStateMachineTransition_2l6ic"), "Locomote", "leaning_pushable", SubResource("AnimationNodeStateMachineTransition_k38qc"), "leaning_pushable", "pushing_pushable", SubResource("AnimationNodeStateMachineTransition_831vp"), "pushing_pushable", "leaning_pushable", SubResource("AnimationNodeStateMachineTransition_epm4v"), "pushing_pushable", "Locomote", SubResource("AnimationNodeStateMachineTransition_3diy6"), "leaning_pushable", "Locomote", SubResource("AnimationNodeStateMachineTransition_uup32"), "Locomote", "crouch", SubResource("AnimationNodeStateMachineTransition_nw37k"), "crouch", "Locomote", SubResource("AnimationNodeStateMachineTransition_e511p"), "crouch", "crawling", SubResource("AnimationNodeStateMachineTransition_sl7d2"), "crawling", "crouch", SubResource("AnimationNodeStateMachineTransition_nedae")]
graph_offset = Vector2(66, -153)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_v7krk"]
graph_offset = Vector2(-226.455, 40.9091)
nodes/AnimSpeed/node = SubResource("AnimationNodeTimeScale_alo0e")
nodes/AnimSpeed/position = Vector2(60, 100)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_61bxm")
nodes/StateMachine/position = Vector2(-120, 100)
nodes/output/position = Vector2(220, 100)
node_connections = [&"output", 0, &"AnimSpeed", &"AnimSpeed", 0, &"StateMachine"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ygtpg"]
radius = 0.15
height = 0.8

[node name="PlayerCharacter" type="RigidBody3D" node_paths=PackedStringArray("animTree")]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
mass = 50.0
physics_material_override = SubResource("PhysicsMaterial_xe66j")
linear_damp = 15.0
angular_damp = 5000.0
script = ExtResource("1_6mn6j")
animTree = NodePath("SkinnedMesh/AnimationTree")

[node name="SkinnedMesh" parent="." instance=ExtResource("2_oyuwf")]
transform = Transform3D(-1, 0, -6.28631e-06, 0, 1, 0, 6.28631e-06, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="SkinnedMesh/rig" index="0"]
bones/1/position = Vector3(-5.86172e-18, -0.0440348, 0.00312107)
bones/1/rotation = Quaternion(0.000191853, 4.25999e-20, 0, 1)
bones/1/scale = Vector3(1, 1, 0.999968)
bones/2/rotation = Quaternion(-0.00357402, 0.0327876, 0.0156004, 0.999334)
bones/3/rotation = Quaternion(0.700905, 8.43486e-08, 8.70634e-08, 0.713255)
bones/4/rotation = Quaternion(-0.702987, 0.0343202, -0.011854, 0.710275)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(0.665899, 9.14319e-08, 7.93813e-08, 0.746042)
bones/8/rotation = Quaternion(-0.47448, -0.533116, -0.449729, 0.537028)
bones/10/rotation = Quaternion(0.628706, -0.579866, 0.227146, -0.465713)
bones/10/scale = Vector3(1.00539, 0.989319, 1.00541)
bones/11/rotation = Quaternion(4.8963e-08, 0.0467319, 1.19989e-07, 0.998907)
bones/12/rotation = Quaternion(0.441636, 0.0465464, -0.0229409, 0.895692)
bones/12/scale = Vector3(1.00256, 0.984903, 1.01286)
bones/13/rotation = Quaternion(-1.15106e-07, 0.0147011, -8.56553e-08, 0.999892)
bones/14/rotation = Quaternion(0.0845272, 0.014735, 0.0229701, 0.996047)
bones/14/scale = Vector3(0.992151, 1.01528, 0.992781)
bones/15/rotation = Quaternion(-0.544994, 0.514766, 0.590401, 0.299039)
bones/16/rotation = Quaternion(0.612769, 0.607662, -0.185117, -0.470098)
bones/16/scale = Vector3(1.00712, 0.985947, 1.00712)
bones/17/rotation = Quaternion(-1.72989e-08, 0.259078, -4.38904e-09, 0.965856)
bones/18/rotation = Quaternion(0.286541, 0.258683, 0.556777, 0.735511)
bones/18/scale = Vector3(1.02339, 0.973719, 1.00358)
bones/19/rotation = Quaternion(8.56665e-09, -0.349421, 1.29631e-08, 0.936966)
bones/20/rotation = Quaternion(-0.363941, -0.346939, -0.123606, 0.855512)
bones/20/scale = Vector3(0.989831, 1.00527, 1.00546)
bones/26/rotation = Quaternion(2.04257e-09, 0.0362274, -0.0015345, 0.999342)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(0.714026, 8.60783e-08, 9.05334e-08, 0.700119)
bones/28/rotation = Quaternion(-0.713556, 0.0242677, -0.0269417, 0.699659)
bones/28/scale = Vector3(1, 1, 1)
bones/29/rotation = Quaternion(0.781919, 7.98056e-08, 9.59998e-08, 0.62338)
bones/34/rotation = Quaternion(0.911221, 0.0455535, -0.0866235, 0.400122)
bones/34/scale = Vector3(1.00618, 0.987775, 1.00619)
bones/35/rotation = Quaternion(5.70637e-09, 0.000262928, 2.60639e-08, 1)
bones/36/rotation = Quaternion(0.495859, 0.000261972, -0.000149467, 0.868403)
bones/36/scale = Vector3(1.00866, 0.969583, 1.02265)
bones/37/rotation = Quaternion(-3.43565e-08, 0.0668121, -5.84525e-08, 0.997766)
bones/38/rotation = Quaternion(0.874703, -0.0668907, 0.0453774, -0.477872)
bones/38/scale = Vector3(0.986502, 0.998264, 1.01633)
bones/39/rotation = Quaternion(-0.00281811, 0.954981, -0.296652, -0.000915229)
bones/42/rotation = Quaternion(0.979011, 0.102217, 0.0837414, -0.155164)
bones/42/scale = Vector3(1.00609, 0.987955, 1.00609)
bones/43/rotation = Quaternion(-2.01815e-08, 0.00826445, 4.18264e-08, 0.999966)
bones/44/rotation = Quaternion(0.640672, 0.00824487, -0.00690363, 0.767739)
bones/44/scale = Vector3(1.00635, 0.970163, 1.02427)
bones/45/rotation = Quaternion(2.1257e-07, -0.0686188, 7.07402e-09, 0.997643)
bones/46/rotation = Quaternion(0.859918, 0.0688232, -0.148698, -0.483418)
bones/46/scale = Vector3(0.990301, 0.997991, 1.01251)
bones/47/rotation = Quaternion(-0.000637308, -0.686344, 0.727276, 0.000602707)
bones/49/position = Vector3(-0.013743, 0.00688704, 0.245062)
bones/49/rotation = Quaternion(0.779984, 0.0427523, -0.0585212, 0.621589)
bones/49/scale = Vector3(0.999999, 0.999971, 0.999998)
bones/50/rotation = Quaternion(-0.102182, 0.00370241, 0.0360011, 0.994107)
bones/50/scale = Vector3(1, 0.999996, 1)
bones/51/rotation = Quaternion(-0.0226994, 0.0107601, 0.00376548, 0.999677)
bones/51/scale = Vector3(1, 0.999999, 1)
bones/52/rotation = Quaternion(-0.0517436, 0.0260834, -0.0311676, 0.997833)
bones/52/scale = Vector3(1, 1, 1)
bones/53/rotation = Quaternion(0.433085, -0.00408665, 0.0359712, 0.900626)
bones/53/scale = Vector3(1, 0.999995, 1)
bones/54/rotation = Quaternion(-0.062883, -6.97981e-05, 4.36515e-06, 0.998021)
bones/54/scale = Vector3(1.00001, 1, 1.00003)
bones/55/rotation = Quaternion(-0.33479, -0.00533838, 0.0328308, 0.941706)
bones/55/scale = Vector3(0.999993, 0.999969, 1.00001)
bones/56/rotation = Quaternion(-0.615759, 9.80625e-05, 1.92407e-05, 0.787935)
bones/57/rotation = Quaternion(-0.289441, 3.09041e-05, -0.00179074, 0.957194)

[node name="AnimationPlayer" parent="SkinnedMesh" index="1"]
speed_scale = 19.12

[node name="AnimationTree" type="AnimationTree" parent="SkinnedMesh"]
tree_root = SubResource("AnimationNodeBlendTree_v7krk")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/AnimSpeed/scale = 0.0
parameters/StateMachine/Locomote/blend_position = 0.997925
parameters/StateMachine/crawling/blend_position = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.42, 0)
shape = SubResource("CapsuleShape3D_ygtpg")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("3_n6sth")

[node name="EnemyWander" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("4_06l8q")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="Slash" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("5_ph5ji")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="SlashAgainTimer" type="Timer" parent="StateMachine/Slash"]
process_callback = 0
wait_time = 0.125
one_shot = true

[node name="Locomote" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("6_et2ma")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="LeaningCrate" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("7_otshi")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="PushingCrate" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("8_hyvrb")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="Crouching" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("9_unn3g")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="Crawling" type="Node" parent="StateMachine" node_paths=PackedStringArray("animTree")]
script = ExtResource("10_5rovj")
animTree = NodePath("../../SkinnedMesh/AnimationTree")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.658125, 0.752909, 0, -0.752909, 0.658125, -4.76837e-07, 5.11775, 3.42914)

[node name="Control" parent="Camera3D" instance=ExtResource("12_haj5d")]
visible = false

[node name="GroundCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0634478, 0.00461194)
target_position = Vector3(0, -0.15, 0)

[connection signal="timeout" from="StateMachine/Slash/SlashAgainTimer" to="StateMachine/Slash" method="finish_slashing"]

[editable path="SkinnedMesh"]

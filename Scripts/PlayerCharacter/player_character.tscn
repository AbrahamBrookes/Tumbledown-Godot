[gd_scene load_steps=42 format=3 uid="uid://5oyo75w8bmvq"]

[ext_resource type="Script" path="res://Scripts/PlayerCharacter/player_character_root.gd" id="1_6v30c"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/player_character.gd" id="2_q7ld7"]
[ext_resource type="PackedScene" uid="uid://c2f6gkn1nj3vd" path="res://Art/Player/Character/import/kora_toon_exporting_to_godot.glb" id="3_n4e6q"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/StateMachine.gd" id="4_vd4kp"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/EnemyWander.gd" id="5_87sd3"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Slash.gd" id="6_afnhe"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Locomote.gd" id="7_x7dml"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/LeaningCrate.gd" id="8_myuww"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/PushingCrate.gd" id="9_xe6gf"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Crouching.gd" id="10_q077h"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/States/Crawling.gd" id="11_3g0di"]
[ext_resource type="Script" path="res://Scripts/PlayerCharacter/player_camera_pivot.gd" id="12_qm30x"]
[ext_resource type="PackedScene" uid="uid://bflp5jntvmqk8" path="res://UI/MainMenu/MainMenu.tscn" id="13_tr5ml"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_alo0e"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_duqcs"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4oav6"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_biff6"]
animation = &"run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_srys3"]
blend_point_0/node = SubResource("AnimationNodeAnimation_duqcs")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_4oav6")
blend_point_1/pos = 0.3
blend_point_2/node = SubResource("AnimationNodeAnimation_biff6")
blend_point_2/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sma0w"]
resource_local_to_scene = true
animation = &"slash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tvpiq"]
animation = &"crawl_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yxknk"]
animation = &"crawl"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_ebfcu"]
blend_point_0/node = SubResource("AnimationNodeAnimation_tvpiq")
blend_point_0/pos = 0.1
blend_point_1/node = SubResource("AnimationNodeAnimation_yxknk")
blend_point_1/pos = 0.5

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qhlp2"]
animation = &"crouch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4hbm8"]
animation = &"leaning_pushable"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g4gtf"]
animation = &"pushing_pushable"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gy7fs"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wbke6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eh4ht"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2l6ic"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k38qc"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_831vp"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_epm4v"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3diy6"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uup32"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nw37k"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e511p"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sl7d2"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nedae"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_61bxm"]
states/Locomote/node = SubResource("AnimationNodeBlendSpace1D_srys3")
states/Locomote/position = Vector2(400, 100)
states/Slash/node = SubResource("AnimationNodeAnimation_sma0w")
states/Slash/position = Vector2(288, -23)
states/crawling/node = SubResource("AnimationNodeBlendSpace1D_ebfcu")
states/crawling/position = Vector2(347, -174)
states/crouch/node = SubResource("AnimationNodeAnimation_qhlp2")
states/crouch/position = Vector2(406, -70)
states/leaning_pushable/node = SubResource("AnimationNodeAnimation_4hbm8")
states/leaning_pushable/position = Vector2(656, -70)
states/pushing_pushable/node = SubResource("AnimationNodeAnimation_g4gtf")
states/pushing_pushable/position = Vector2(672, 39)
transitions = ["Start", "Locomote", SubResource("AnimationNodeStateMachineTransition_gy7fs"), "Locomote", "End", SubResource("AnimationNodeStateMachineTransition_wbke6"), "Slash", "Locomote", SubResource("AnimationNodeStateMachineTransition_eh4ht"), "Locomote", "Slash", SubResource("AnimationNodeStateMachineTransition_2l6ic"), "Locomote", "leaning_pushable", SubResource("AnimationNodeStateMachineTransition_k38qc"), "leaning_pushable", "pushing_pushable", SubResource("AnimationNodeStateMachineTransition_831vp"), "pushing_pushable", "leaning_pushable", SubResource("AnimationNodeStateMachineTransition_epm4v"), "pushing_pushable", "Locomote", SubResource("AnimationNodeStateMachineTransition_3diy6"), "leaning_pushable", "Locomote", SubResource("AnimationNodeStateMachineTransition_uup32"), "Locomote", "crouch", SubResource("AnimationNodeStateMachineTransition_nw37k"), "crouch", "Locomote", SubResource("AnimationNodeStateMachineTransition_e511p"), "crouch", "crawling", SubResource("AnimationNodeStateMachineTransition_sl7d2"), "crawling", "crouch", SubResource("AnimationNodeStateMachineTransition_nedae")]
graph_offset = Vector2(-10, -211)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_d3hs1"]
nodes/AnimSpeed/node = SubResource("AnimationNodeTimeScale_alo0e")
nodes/AnimSpeed/position = Vector2(60, 100)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_61bxm")
nodes/StateMachine/position = Vector2(-120, 100)
nodes/output/position = Vector2(220, 100)
node_connections = [&"output", 0, &"AnimSpeed", &"AnimSpeed", 0, &"StateMachine"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_htfwu"]
radius = 0.15
height = 0.8

[node name="Node3D" type="Node3D"]
script = ExtResource("1_6v30c")

[node name="PlayerCharacter" type="RigidBody3D" parent="."]
script = ExtResource("2_q7ld7")

[node name="SkinnedMesh" parent="PlayerCharacter" instance=ExtResource("3_n4e6q")]
transform = Transform3D(-1, 0, -6.28631e-06, 0, 1, 0, 6.28631e-06, 0, -1, 0, 0, 0)

[node name="GeneralSkeleton" parent="PlayerCharacter/SkinnedMesh/rig" index="0"]
bones/1/position = Vector3(9.10109e-05, -0.00766023, 0.00169893)
bones/1/rotation = Quaternion(0.0211584, -0.000509266, -0.024057, 0.999487)
bones/2/rotation = Quaternion(-2.98023e-08, -1.63607e-09, 9.98106e-10, 1)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-2.98023e-08, 1.86264e-09, 0, 1)
bones/4/position = Vector3(0.00449537, 0.0691386, -0.00177577)
bones/4/rotation = Quaternion(1.98954e-07, -1.22236e-08, -1.42754e-08, 1)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(-5.94882e-08, 3.72529e-09, 7.45058e-09, 1)
bones/8/rotation = Quaternion(0.5, 0.5, 0.5, -0.5)
bones/10/rotation = Quaternion(0.0617761, 0.99152, 0.113872, -0.0102082)
bones/10/scale = Vector3(1.00029, 1.00055, 0.999165)
bones/11/rotation = Quaternion(-0.00471358, -0.000842269, -0.0107044, 0.999931)
bones/12/rotation = Quaternion(-0.0122793, -0.775102, 0.0226607, 0.631311)
bones/12/scale = Vector3(0.999627, 0.999165, 1.00174)
bones/13/rotation = Quaternion(0.0165132, 0.00448433, 0.00919365, 0.999811)
bones/14/rotation = Quaternion(0.0742764, 0.864586, -0.0645994, 0.492748)
bones/14/scale = Vector3(0.998371, 0.998712, 1.00314)
bones/15/rotation = Quaternion(0.5, -0.5, -0.5, -0.5)
bones/16/rotation = Quaternion(-0.074992, 0.989342, 0.0458754, -0.11608)
bones/16/scale = Vector3(0.997596, 0.997193, 1.00525)
bones/17/rotation = Quaternion(0.0761659, -0.047693, -0.270287, 0.958577)
bones/18/rotation = Quaternion(-0.24648, 0.355228, -0.487726, 0.758409)
bones/18/scale = Vector3(1.0034, 1.0003, 0.996368)
bones/19/rotation = Quaternion(-0.16171, -0.0731636, 0.266147, 0.947451)
bones/20/rotation = Quaternion(0.136519, -0.365322, 0.41259, 0.823208)
bones/20/scale = Vector3(1.00872, 1.00445, 0.987058)
bones/26/rotation = Quaternion(-4.54616e-09, 0.00257385, 0.0607651, 0.998149)
bones/27/rotation = Quaternion(-5.95464e-08, 1.86264e-09, -3.72529e-09, 1)
bones/28/rotation = Quaternion(1.74278e-07, 0.00257385, 0.0607651, 0.998149)
bones/28/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.0327549, -0.228229, 0.969721, 0.0805025)
bones/34/scale = Vector3(0.996438, 1.0039, 0.999725)
bones/35/rotation = Quaternion(3.58767e-05, -0.00104447, -0.000692847, 0.999999)
bones/36/rotation = Quaternion(-0.0433048, 0.969302, 0.240911, 0.0232401)
bones/36/scale = Vector3(0.994965, 1.01226, 0.992781)
bones/37/rotation = Quaternion(0.00283543, -0.016211, -0.00777976, 0.999834)
bones/38/rotation = Quaternion(-0.069926, 0.841129, -0.535855, 0.0217236)
bones/38/scale = Vector3(1.00822, 0.957063, 1.03553)
bones/39/rotation = Quaternion(2.22516e-10, 1, 0, -6.82983e-10)
bones/42/rotation = Quaternion(0.0663193, 0.325798, 0.922452, 0.196316)
bones/42/scale = Vector3(0.997346, 1.00348, 0.999215)
bones/43/rotation = Quaternion(0.00109105, -0.00898532, 0.00504017, 0.999946)
bones/44/rotation = Quaternion(0.0780131, 0.944404, 0.318787, 0.0197335)
bones/44/scale = Vector3(0.999039, 1.00138, 0.999678)
bones/45/rotation = Quaternion(0.0187696, -0.0241347, 0.0645724, 0.997445)
bones/46/rotation = Quaternion(-0.0631203, 0.783924, -0.584533, -0.1995)
bones/46/scale = Vector3(1.00338, 1.03384, 0.963656)
bones/47/rotation = Quaternion(2.46954e-10, 1, 0, -2.46954e-10)
bones/49/position = Vector3(0.00797293, 0.233745, -0.0504653)
bones/49/rotation = Quaternion(0.0210639, 0.00206347, 0.0974726, 0.995013)
bones/49/scale = Vector3(1, 1, 1)
bones/50/rotation = Quaternion(0.000500734, 0.00116398, -0.0606895, 0.998156)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(0.00318533, -0.0133976, -0.0282386, 0.999506)
bones/51/scale = Vector3(1, 1, 1)
bones/52/rotation = Quaternion(0.00275163, -0.0240208, 0.0330419, 0.999161)
bones/52/scale = Vector3(1, 1, 1)
bones/53/rotation = Quaternion(-6.98492e-09, -2.79397e-09, 1.5134e-08, 1)
bones/53/scale = Vector3(1, 1, 1)
bones/54/rotation = Quaternion(-2.98096e-08, 9.31323e-10, -5.82077e-11, 1)
bones/54/scale = Vector3(1, 1, 1)
bones/55/rotation = Quaternion(5.96919e-08, 3.72529e-09, -2.91038e-09, 1)
bones/55/scale = Vector3(1, 1, 1)
bones/56/rotation = Quaternion(-0.0222442, -4.25566e-06, 1.3743e-05, 0.999753)
bones/57/rotation = Quaternion(-0.00124168, -1.16726e-05, 3.22022e-05, 0.999999)
bones/58/position = Vector3(6.91008e-15, 0.778006, 0.467975)

[node name="AnimationTree" type="AnimationTree" parent="PlayerCharacter/SkinnedMesh"]
tree_root = SubResource("AnimationNodeBlendTree_d3hs1")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/AnimSpeed/scale = 1.0
parameters/StateMachine/Locomote/blend_position = -0.0275049
parameters/StateMachine/crawling/blend_position = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerCharacter"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.42, 0)
shape = SubResource("CapsuleShape3D_htfwu")

[node name="StateMachine" type="Node" parent="PlayerCharacter" node_paths=PackedStringArray("initial_state")]
script = ExtResource("4_vd4kp")
initial_state = NodePath("Locomote")

[node name="EnemyWander" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("5_87sd3")

[node name="Slash" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("6_afnhe")

[node name="Locomote" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("7_x7dml")

[node name="LeaningCrate" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("8_myuww")

[node name="PushingCrate" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("9_xe6gf")

[node name="Crouching" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("10_q077h")

[node name="Crawling" type="Node" parent="PlayerCharacter/StateMachine"]
script = ExtResource("11_3g0di")

[node name="PlayerCameraPivot" type="Node3D" parent="."]
script = ExtResource("12_qm30x")

[node name="Camera3D" type="Camera3D" parent="PlayerCameraPivot"]
transform = Transform3D(1, 0, 0, 0, 0.658125, 0.752909, 0, -0.752909, 0.658125, -4.76837e-07, 5.11775, 3.42914)

[node name="Control" parent="PlayerCameraPivot/Camera3D" instance=ExtResource("13_tr5ml")]
visible = false

[node name="GroundCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0634478, 0.00461194)
target_position = Vector3(0, -0.15, 0)

[editable path="PlayerCharacter/SkinnedMesh"]
